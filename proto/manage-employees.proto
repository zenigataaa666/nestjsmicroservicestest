// Définition du service de gestion des employés

syntax = "proto3";

package manage_employees;

import "common.proto";

// ==================== SERVICE EMPLOYEES ====================
service EmployeesService {
  // CRUD Employees
  rpc GetEmployees(GetEmployeesRequest) returns (GetEmployeesResponse);
  rpc GetEmployee(GetEmployeeRequest) returns (EmployeeResponse);
  rpc CreateEmployee(CreateEmployeeRequest) returns (EmployeeResponse);
  rpc UpdateEmployee(UpdateEmployeeRequest) returns (EmployeeResponse);
  rpc DeleteEmployee(DeleteEmployeeRequest) returns (common.Status);
}

// ==================== SERVICE DEPARTMENTS ====================
service DepartmentsService {
  // CRUD Departments
  rpc GetDepartments(GetDepartmentsRequest) returns (GetDepartmentsResponse);
  rpc GetDepartment(GetDepartmentRequest) returns (DepartmentResponse);
  rpc CreateDepartment(CreateDepartmentRequest) returns (DepartmentResponse);
  rpc UpdateDepartment(UpdateDepartmentRequest) returns (DepartmentResponse);
  rpc DeleteDepartment(DeleteDepartmentRequest) returns (common.Status);
}

// ==================== SERVICE DOCUMENTS ====================
service DocumentsService {
  // CRUD Documents
  rpc CreateDocument(CreateDocumentRequest) returns (DocumentResponse);
  rpc GetDocumentsByEmployee(GetDocumentsByEmployeeRequest) returns (GetDocumentsResponse);
  rpc GetDocument(GetDocumentRequest) returns (DocumentResponse);
  rpc UpdateDocument(UpdateDocumentRequest) returns (DocumentResponse);
  rpc DeleteDocument(DeleteDocumentRequest) returns (common.Status);
}

// ==================== MESSAGES EMPLOYEES ====================

message GetEmployeesRequest {
  int32 page = 1;
  int32 limit = 2;
  string search = 3;
  string department_id = 4;
  string status = 5; // Replaces 'bool is_active'
  string sort_by = 6;
  string sort_order = 7;
}

message GetEmployeesResponse {
  repeated EmployeeResponse data = 1;
  int32 total = 2;
  int32 page = 3;
  int32 limit = 4;
  int32 total_pages = 5;
}

message GetEmployeeRequest {
  string id = 1;
}

message EmployeeResponse {
  string id = 1;
  string first_name = 2;
  string last_name = 3;
  string email = 4;
  string phone_number = 5; // Renamed from phone to match DB
  string position = 6;
  string hire_date = 7;
  double salary = 8;
  string status = 9; // Enum: active, on_leave, suspended, terminated
  DepartmentResponse department = 10;
  string department_id = 11;
  string user_id = 12;
  string address = 13;
  string city = 14;
  string country = 15;
  string created_at = 16;
  string updated_at = 17;
}

message CreateEmployeeRequest {
  string first_name = 1;
  string last_name = 2;
  string email = 3;
  string phone_number = 4;
  string position = 5;
  string hire_date = 6;
  double salary = 7;
  string department_id = 8;
  string user_id = 9;
  string status = 10;
  string address = 11;
  string city = 12;
  string country = 13;
  // created_by removed from Request body, passed contextually or part of metadata if needed, 
  // but User requested 'uploaded_by' style via Controller. 
  // We keep it strict to Entity fields here.
}

message UpdateEmployeeRequest {
  string id = 1;
  string first_name = 2;
  string last_name = 3;
  string email = 4;
  string phone_number = 5;
  string position = 6;
  string hire_date = 7;
  double salary = 8;
  string status = 9;
  string department_id = 10;
  string address = 11;
  string city = 12;
  string country = 13;
}

message DeleteEmployeeRequest {
  string id = 1;
}

// ==================== MESSAGES DEPARTMENTS ====================

message GetDepartmentsRequest {
  int32 page = 1;
  int32 limit = 2;
  string search = 3;
  string sort_by = 4;
  string sort_order = 5;
}

message GetDepartmentsResponse {
  repeated DepartmentResponse data = 1;
  int32 total = 2;
  int32 page = 3;
  int32 limit = 4;
  int32 total_pages = 5;
}

message GetDepartmentRequest {
  string id = 1;
}

message DepartmentResponse {
  string id = 1;
  string code = 2;
  string name = 3;
  string description = 4;
  string manager_id = 5;
  string parent_id = 6;
  string created_at = 7;
  string updated_at = 8;
}

message CreateDepartmentRequest {
  string code = 1;
  string name = 2;
  string description = 3;
  string manager_id = 4;
  string parent_id = 5;
}

message UpdateDepartmentRequest {
  string id = 1;
  string code = 2;
  string name = 3;
  string description = 4;
  string manager_id = 5;
  string parent_id = 6;
}

message DeleteDepartmentRequest {
  string id = 1;
}

// ==================== MESSAGES DOCUMENTS ====================

message GetDocumentsByEmployeeRequest {
  string employee_id = 1;
}

message GetDocumentsResponse {
  repeated DocumentResponse data = 1;
}

message GetDocumentRequest {
  string id = 1;
}

message DocumentResponse {
    string id = 1;
    string document_type = 2;
    string file_name = 3;
    string file_path = 4;
    string file_hash = 5;
    int64 file_size = 6;
    string file_type = 7;
    string description = 8;
    string uploaded_by = 9;
    string employee_id = 10;
    string created_at = 11;
    string updated_at = 12;
}

message CreateDocumentRequest {
  string document_type = 1;
  string file_name = 2;
  string file_path = 3;
  string file_hash = 4;
  int64 file_size = 5;
  string file_type = 6;
  string description = 7;
  string uploaded_by = 8; 
  string employee_id = 9;
}

message UpdateDocumentRequest {
  string id = 1;
  string document_type = 2;
  string description = 3;
}

message DeleteDocumentRequest {
  string id = 1;
}